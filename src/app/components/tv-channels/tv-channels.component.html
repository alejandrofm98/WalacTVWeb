<app-navbar></app-navbar>
<div class="channels-container">
  <div class="header">
    <h1>Canales de TV</h1>

    <div class="search-box">
      <input
        type="text"
        [(ngModel)]="searchTerm"
        (input)="onSearch()"
        placeholder="Buscar canal..."
        class="search-input"
      />
      <span class="search-icon">üîç</span>
    </div>
  </div>

  <div class="filter-bar" *ngIf="groups.length > 0">
    <select [(ngModel)]="selectedGroup" (change)="onGroupFilterChange()" class="group-filter">
      <option value="">Todos los grupos</option>
      <option *ngFor="let group of groups" [value]="group">{{ group }}</option>
    </select>
  </div>

  <div class="groups-wrapper">
    <div *ngFor="let group of groupedChannels" class="channel-group">
      <div class="group-header" (click)="toggleGroup(group)">
        <div class="group-info">
          <h2 class="group-title">{{ group.name }}</h2>
          <span class="group-count">{{ group.channels.length }} canales</span>
        </div>
        <span class="toggle-icon" [class.expanded]="group.expanded">
          {{ group.expanded ? '‚ñº' : '‚ñ∂' }}
        </span>
      </div>

      <div class="channels-grid" [class.collapsed]="!group.expanded">
        <div
          *ngFor="let channel of group.channels"
          class="channel-card"
          (click)="onChannelClick(channel)">
          <div class="channel-number">{{ channel.num }}</div>
          <div class="channel-logo">
            <img [src]="channel.logo | https" [alt]="channel.nombre" />
          </div>
          <div class="channel-name">
            {{ channel.nombre }}
          </div>
        </div>
      </div>
    </div>
  </div>

  <div #loadMoreTrigger class="load-more-trigger" *ngIf="hasMore">
    <div *ngIf="loading" class="loading-more">
      <div class="spinner small"></div>
      <span>Cargando m√°s canales...</span>
    </div>
  </div>

  <div *ngIf="totalChannels === 0 && !loading" class="no-results">
    <p>No se encontraron canales</p>
  </div>
</div>
